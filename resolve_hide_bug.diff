diff --git a/config.h b/config.h
index 3ad080e..d8f63c0 100644
--- a/config.h
+++ b/config.h
@@ -71,17 +71,17 @@ static char lockfile[] = "/tmp/dwm.lock"; // doublepressquitPatch
 
 static const Rule rules[] = {
     /* class                 instance              title             tags mask     isfloating  isglobal    isnoborder monitor */
-    //{"demotest",                  NULL,                 NULL,             1 << 5,       0,          0,          0,        -1 },
+    {"demotest",                  NULL,                 NULL,             1 << 5,       0,          0,          0,        -1 },
     {"chrome",               NULL,                 NULL,             1 << 6,       0,          0,          0,        -1 },
     {"Chromium",             NULL,                 NULL,             1 << 6,       0,          0,          0,        -1 },
   //  {"music",                NULL,                 NULL,             1 << 7,       1,          0,          1,        -1 },
   //  { NULL,                 "qq",                  NULL,             1 << 8,       0,          0,          1,        -1 },
   //  { NULL,                 "wechat.exe",          NULL,             1 << 9,       0,          0,          0,        -1 },
   //  { NULL,                 "wxwork.exe",          NULL,             1 << 10,      0,          0,          0,        -1 },
-  //  { NULL,                  NULL,                "broken",          0,            1,          0,          0,        -1 },
+    { NULL,                  NULL,                "broken",          0,            1,          0,          0,        -1 },
   //  { "图片查看",           "图片查看",           "图片查看",        0,            1,          0,          0,        -1 },
   //  { "图片预览",           "图片预览",           "图片预览",        0,            1,          0,          0,        -1 },
-  //  { NULL,                  NULL,                "crx_",            0,            1,          0,          0,        -1 },
+    { NULL,                  NULL,                "crx_",            0,            1,          0,          0,        -1 },
   //  {"flameshot",            NULL,                 NULL,             0,            1,          0,          0,        -1 },
   //  {"wemeetapp",            NULL,                 NULL,             TAGMASK,      1,          1,          0,        -1 }, // 腾讯会议在切换tag时有诡异bug导致退出 变成global来规避该问题
     {"float",                NULL,                 NULL,             0,            1,          0,          0,        -1 }, // 特殊class client默认浮动
diff --git a/dif.diff b/dif.diff
new file mode 100644
index 0000000..f07ba0c
--- /dev/null
+++ b/dif.diff
@@ -0,0 +1,54 @@
+diff --git a/config.h b/config.h
+index d8f63c0..3ad080e 100644
+--- a/config.h
++++ b/config.h
+@@ -71,17 +71,17 @@ static char lockfile[] = "/tmp/dwm.lock"; // doublepressquitPatch
+ 
+ static const Rule rules[] = {
+     /* class                 instance              title             tags mask     isfloating  isglobal    isnoborder monitor */
+-    {"demotest",                  NULL,                 NULL,             1 << 5,       0,          0,          0,        -1 },
++    //{"demotest",                  NULL,                 NULL,             1 << 5,       0,          0,          0,        -1 },
+     {"chrome",               NULL,                 NULL,             1 << 6,       0,          0,          0,        -1 },
+     {"Chromium",             NULL,                 NULL,             1 << 6,       0,          0,          0,        -1 },
+   //  {"music",                NULL,                 NULL,             1 << 7,       1,          0,          1,        -1 },
+   //  { NULL,                 "qq",                  NULL,             1 << 8,       0,          0,          1,        -1 },
+   //  { NULL,                 "wechat.exe",          NULL,             1 << 9,       0,          0,          0,        -1 },
+   //  { NULL,                 "wxwork.exe",          NULL,             1 << 10,      0,          0,          0,        -1 },
+-    { NULL,                  NULL,                "broken",          0,            1,          0,          0,        -1 },
++  //  { NULL,                  NULL,                "broken",          0,            1,          0,          0,        -1 },
+   //  { "图片查看",           "图片查看",           "图片查看",        0,            1,          0,          0,        -1 },
+   //  { "图片预览",           "图片预览",           "图片预览",        0,            1,          0,          0,        -1 },
+-    { NULL,                  NULL,                "crx_",            0,            1,          0,          0,        -1 },
++  //  { NULL,                  NULL,                "crx_",            0,            1,          0,          0,        -1 },
+   //  {"flameshot",            NULL,                 NULL,             0,            1,          0,          0,        -1 },
+   //  {"wemeetapp",            NULL,                 NULL,             TAGMASK,      1,          1,          0,        -1 }, // 腾讯会议在切换tag时有诡异bug导致退出 变成global来规避该问题
+     {"float",                NULL,                 NULL,             0,            1,          0,          0,        -1 }, // 特殊class client默认浮动
+diff --git a/dwm.c b/dwm.c
+index 9899ad3..3eb6a97 100644
+--- a/dwm.c
++++ b/dwm.c
+@@ -2874,23 +2874,11 @@ togglescratch(const Arg *arg)
+ void
+ restorewin(const Arg *arg) {
+     int i = hiddenWinStackTop;
+-    char buf[100];
+     while (i > -1) {
+-        if (HIDDEN(hiddenWinStack[i]) && \
+-        ISVISIBLE(hiddenWinStack[i]) 
+-        )
+-        //hiddenWinStack[i]->tags == selmon->tagset[selmon->seltags]  
+-        {
+-            sprintf(buf,"debug4 top=%d i=%d",hiddenWinStackTop,i);
+-            logtofile(buf);
+-
++        if (HIDDEN(hiddenWinStack[i]) && ISVISIBLE(hiddenWinStack[i])) {
+             show(hiddenWinStack[i]);
+             focus(hiddenWinStack[i]);
+             restack(selmon);
+-            for (int j = i; j < hiddenWinStackTop+1; ++j) { // need set j<hiddenWinStackTop+1. Because show will reduce hiddenWinStackTop value.
+-                hiddenWinStack[j] = hiddenWinStack[j + 1];
+-            }
+-            //--hiddenWinStackTop; Because show(hiddenWinStack[i]) will reduce hiddenWinStackTop value.
+             return;
+         }
+         --i;
diff --git a/dwm.c b/dwm.c
index 3eb6a97..ca2894c 100644
--- a/dwm.c
+++ b/dwm.c
@@ -2875,10 +2875,18 @@ void
 restorewin(const Arg *arg) {
     int i = hiddenWinStackTop;
     while (i > -1) {
-        if (HIDDEN(hiddenWinStack[i]) && ISVISIBLE(hiddenWinStack[i])) {
+        if (HIDDEN(hiddenWinStack[i]) && \
+        ISVISIBLE(hiddenWinStack[i]) 
+        )
+        //hiddenWinStack[i]->tags == selmon->tagset[selmon->seltags]  
+        {
             show(hiddenWinStack[i]);
             focus(hiddenWinStack[i]);
             restack(selmon);
+            for (int j = i; j < hiddenWinStackTop+1; ++j) { // need set j<hiddenWinStackTop+1. Because show will reduce hiddenWinStackTop value.
+                hiddenWinStack[j] = hiddenWinStack[j + 1];
+            }
+            //--hiddenWinStackTop; Because show(hiddenWinStack[i]) will reduce hiddenWinStackTop value.
             return;
         }
         --i;
diff --git a/resolve_hide_bug.diff b/resolve_hide_bug.diff
new file mode 100644
index 0000000..35364f6
--- /dev/null
+++ b/resolve_hide_bug.diff
@@ -0,0 +1,20 @@
+diff --git a/dwm.c b/dwm.c
+index 3eb6a97..9899ad3 100644
+--- a/dwm.c
++++ b/dwm.c
+@@ -2874,11 +2874,23 @@ togglescratch(const Arg *arg)
+ void
+ restorewin(const Arg *arg) {
+     int i = hiddenWinStackTop;
+     while (i > -1) {
+         if (HIDDEN(hiddenWinStack[i]) && ISVISIBLE(hiddenWinStack[i])) {
+             show(hiddenWinStack[i]);
+             focus(hiddenWinStack[i]);
+             restack(selmon);
++            for (int j = i; j < hiddenWinStackTop+1; ++j) { // need set j<hiddenWinStackTop+1. Because show will reduce hiddenWinStackTop value.
++                hiddenWinStack[j] = hiddenWinStack[j + 1];
++            }
++            //--hiddenWinStackTop; Because show(hiddenWinStack[i]) will reduce hiddenWinStackTop value.
+             return;
+         }
+         --i;
